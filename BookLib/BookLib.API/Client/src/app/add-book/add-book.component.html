
<div *ngIf="filterParams" class="container-fluid">

  <div class="row">
    <div class="col-12">
    <h2>Новая книга</h2>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <mat-form-field>
        <input matInput placeholder="Название" [(formControl)]="nameFormControl">
        <mat-error *ngIf="nameFormControl.invalid">{{getNameErrorMessage()}}</mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
      <div class="select">
      <mat-form-field>
        <mat-label>Автор</mat-label>
        <mat-select [(value)]="selectedAuthorId">
          <mat-option>Новый автор</mat-option>
          <mat-option *ngFor="let author of filterParams.authors" [value]="author.id">
            {{author.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field *ngIf="!selectedAuthorId">
        <input matInput placeholder="Новый автор" [(formControl)]="authorFormControl">
        <mat-error *ngIf="authorFormControl.invalid">{{getAuthorErrorMessage()}}</mat-error>
      </mat-form-field>
      </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
      <div class="select">
      <mat-form-field>
        <mat-label>Издатель</mat-label>
        <mat-select [(value)]="selectedPublisherId">
          <mat-option>Новый издатель</mat-option>
          <mat-option *ngFor="let publisher of filterParams.publishers" [value]="publisher.id">
            {{publisher.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field *ngIf="!selectedPublisherId">
        <input matInput placeholder="Новый издатель" [(formControl)]="publisherFormControl">
        <mat-error *ngIf="publisherFormControl.invalid">{{getPublisherErrorMessage()}}</mat-error>
      </mat-form-field>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <mat-form-field>
        <textarea  matInput placeholder="Описание" [(formControl)]="descriptionFormControl"></textarea>
        <mat-error *ngIf="descriptionFormControl.invalid">{{getDescriptionErrorMessage()}}</mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="row">
    <div class="col-6">
      <mat-checkbox [(ngModel)]="hasSeries">Входит в серию книг</mat-checkbox>
      
      <div *ngIf="hasSeries" class="select">
      <mat-form-field>
        <mat-label>Серия</mat-label>
        <mat-select [(value)]="selectedSeriesId">
          <mat-option>Новая серия</mat-option>
          <mat-option *ngFor="let series of filterParams.series" [value]="series.id">
            {{series.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field *ngIf="hasSeries && !selectedSeriesId">
        <input matInput placeholder="Новая серия" [(formControl)]="seriesFormControl">
        <mat-error *ngIf="seriesFormControl.invalid">{{getSeriesErrorMessage()}}</mat-error>
      </mat-form-field>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
      <div class="select">
      <mat-form-field>
        <mat-label>Категория</mat-label>
        <mat-select [(value)]="selectedCategoryId" (selectionChange)="getCategoryGenres();setDisableGenre()">
          <mat-option>Новая категория</mat-option>
          <mat-option *ngFor="let category of filterParams.categories" [value]="category.category.id">
            {{category.category.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field *ngIf="!selectedCategoryId">
        <input matInput placeholder="Новая категория" [(formControl)]="categoryFormControl" (change)="setDisableGenre()">
        <mat-error *ngIf="categoryFormControl.invalid">{{getCategoryErrorMessage()}}</mat-error>
      </mat-form-field>
    </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
      <div class="select">
      <mat-form-field>
        <mat-label>Жанр</mat-label>
        <mat-select [(value)]="selectedGenreId" [disabled]="disableGenre">
          <mat-option>Новый жанр</mat-option>
          <mat-option *ngFor="let genre of selectedCategoryGenres" [value]="genre.id">
            {{genre.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field  *ngIf="!selectedGenreId || !selectedCategoryId">
        <input matInput placeholder="Новый жанр" [(formControl)]="genreFormControl">
        <mat-error *ngIf="genreFormControl.invalid">{{getGenreErrorMessage()}}</mat-error>
      </mat-form-field>
    </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
      <mat-form-field>
        <input matInput placeholder="ISBN" [(formControl)]="isbnFormControl">
        <mat-error *ngIf="isbnFormControl.invalid">{{getISBNErrorMessage()}}</mat-error>
      </mat-form-field>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
      <mat-form-field>
        <input matInput placeholder="Год издания" type="number" [(formControl)]="releaseYearFormControl">
        <mat-error *ngIf="releaseYearFormControl.invalid">{{getReleaseYearErrorMessage()}}</mat-error>
      </mat-form-field>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
      <mat-form-field>
        <input matInput placeholder="Количество книг" type="number" [(formControl)]="countFormControl">
        <mat-error *ngIf="countFormControl.invalid">{{getCountErrorMessage()}}</mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <a class="text" [routerLink]="" (click)="addBook()">Добавить книгу</a>
    </div>
  </div>

</div>







