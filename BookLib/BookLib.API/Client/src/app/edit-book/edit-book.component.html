<mat-list *ngIf="filterParams">
  <mat-list-item>
    <ul *ngIf="failtureMessages">
      <li *ngFor="let message of failtureMessages">
        {{message}}
      </li>
    </ul>
  </mat-list-item>
  <mat-list-item>
    <mat-form-field>
      <input matInput placeholder="Название" [(formControl)]="nameFormControl">
      <mat-error *ngIf="nameFormControl.invalid">{{getNameErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-form-field>
      <input matInput placeholder="ISBN" [(formControl)]="isbnFormControl">
      <mat-error *ngIf="isbnFormControl.invalid">{{getISBNErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-form-field>
      <textarea  matInput placeholder="Описание" [(formControl)]="descriptionFormControl"></textarea>
      <mat-error *ngIf="descriptionFormControl.invalid">{{getDescriptionErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-form-field>
      <input matInput placeholder="Дата издания" type="number" [(formControl)]="releaseYearFormControl">
      <mat-error *ngIf="releaseYearFormControl.invalid">{{getReleaseYearErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-form-field>
      <mat-label>Автор</mat-label>
      <mat-select [(value)]="selectedAuthorId">
        <mat-option>Новый автор</mat-option>
        <mat-option *ngFor="let author of filterParams.authors" [value]="author.id">
          {{author.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-list-item>
  <mat-list-item *ngIf="!selectedAuthorId">
    <mat-form-field>
      <input matInput placeholder="Имя автора" [(formControl)]="authorFormControl">
      <mat-error *ngIf="authorFormControl.invalid">{{getAuthorErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-form-field>
      <mat-label>Издатель</mat-label>
      <mat-select [(value)]="selectedPublisherId">
        <mat-option>Новый издатель</mat-option>
        <mat-option *ngFor="let publisher of filterParams.publishers" [value]="publisher.id">
          {{publisher.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-list-item>
  <mat-list-item *ngIf="!selectedPublisherId">
    <mat-form-field>
      <input matInput placeholder="Издатель" [(formControl)]="publisherFormControl">
      <mat-error *ngIf="publisherFormControl.invalid">{{getPublisherErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-checkbox [(ngModel)]="hasSeries">Входит в серию книг</mat-checkbox>
  </mat-list-item>
  <mat-list-item *ngIf="hasSeries">
    <mat-form-field>
      <mat-label>Серия</mat-label>
      <mat-select [(value)]="selectedSeriesId">
        <mat-option>Новая серия</mat-option>
        <mat-option *ngFor="let series of filterParams.series" [value]="series.id">
          {{series.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-list-item>
  <mat-list-item *ngIf="hasSeries && !selectedSeriesId">
    <mat-form-field>
      <input matInput placeholder="Серия" [(formControl)]="seriesFormControl">
      <mat-error *ngIf="seriesFormControl.invalid">{{getSeriesErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-form-field>
      <mat-label>Категория</mat-label>
      <mat-select [(value)]="selectedCategoryId" (selectionChange)="getCategoryGenres()">
        <mat-option>Новая категория</mat-option>
        <mat-option *ngFor="let category of filterParams.categories" [value]="category.category.id">
          {{category.category.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-list-item>
  <mat-list-item *ngIf="!selectedCategoryId">
    <mat-form-field>
      <input matInput placeholder="Категория" [(formControl)]="categoryFormControl">
      <mat-error *ngIf="categoryFormControl.invalid">{{getCategoryErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <mat-form-field>
      <mat-label>Жанр</mat-label>
      <mat-select [(value)]="selectedGenreId"  [disabled]="!selectedCategoryId && (!categoryFormControl.value || categoryFormControl.invalid)">
        <mat-option>Новый жанр</mat-option>
        <mat-option *ngFor="let genre of selectedCategoryGenres" [value]="genre.id">
          {{genre.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-list-item>
  <mat-list-item *ngIf="!selectedGenreId || !selectedCategoryId">
    <mat-form-field>
      <input matInput placeholder="Жанр" [(formControl)]="genreFormControl">
      <mat-error *ngIf="genreFormControl.invalid">{{getGenreErrorMessage()}}</mat-error>
    </mat-form-field>
  </mat-list-item>

  <mat-list-item>
    <button mat-button (click)="editBook()">Изменить книгу</button>
  </mat-list-item>
</mat-list>
