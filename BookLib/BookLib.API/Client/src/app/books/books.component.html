<div *ngIf="filterParams">
  <span>
    <mat-form-field>
      <mat-label>Поиск в названии</mat-label>
      <input matInput [(ngModel)]="inNameString">
      <button mat-button *ngIf="inNameString" matSuffix mat-icon-button aria-label="Clear" (click)="inNameString=''">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </span>
  <span>
    <mat-form-field>
      <mat-label>Год издания</mat-label>
      <mat-select [(value)]="selectedReleaseYear">
        <mat-option>---</mat-option>
        <mat-option *ngFor="let year of filterParams.releaseYears" [value]="year">
          {{year}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <span>
    <mat-form-field>
      <mat-label>Автор</mat-label>
      <mat-select [(value)]="selectedAuthorId">
        <mat-option>---</mat-option>
        <mat-option *ngFor="let author of filterParams.authors" [value]="author.id">
          {{author.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <span>
    <mat-form-field>
      <mat-label>Издатель</mat-label>
      <mat-select [(value)]="selectedPublisherId">
        <mat-option>---</mat-option>
        <mat-option *ngFor="let publisher of filterParams.publishers" [value]="publisher.id">
          {{publisher.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <span>
    <mat-form-field>
      <mat-label>Серия</mat-label>
      <mat-select [(value)]="selectedSeriesId">
        <mat-option>---</mat-option>
        <mat-option *ngFor="let series of filterParams.series" [value]="series.id">
          {{series.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <span>
    <mat-form-field>
      <mat-label>Категория</mat-label>
      <mat-select [(value)]="selectedCategoryId" (selectionChange)="getCategoryGenres()">
        <mat-option>---</mat-option>
        <mat-option *ngFor="let category of filterParams.categories" [value]="category.category.id">
          {{category.category.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <span>
    <mat-form-field>
      <mat-label>Жанр</mat-label>
      <mat-select [(value)]="selectedGenreId" [disabled]="!selectedCategoryId">
        <mat-option>---</mat-option>
        <mat-option *ngFor="let genre of selectedCategoryGenres" [value]="genre.id">
          {{genre.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <span>
    <mat-checkbox [(ngModel)]="selectedHasFree">Только свободные</mat-checkbox>
  </span>
  <span>
    <mat-form-field>
      <mat-label>Сортировать по</mat-label>
      <mat-select [(value)]="selectedSortProperty">
        <mat-option *ngFor="let sortProperty of filterParams.sortProperties" [value]="sortProperty.value">
          {{sortProperty.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <span *ngIf="selectedSortProperty" (click)="getSortOrder()">
    <mat-checkbox [(ngModel)]="selectedSortOrderValue">По возрастанию</mat-checkbox>
  </span>
  <button mat-button (click)="getBooks()">Фильтровать!</button>
</div>

<ul class="books">
  <li *ngFor="let b of books">
    <a routerLink="/book/{{b.id}}">
      <span class="badge">{{b.name}}</span> {{b.author}}
    </a>
  </li>
</ul>
